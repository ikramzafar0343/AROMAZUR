{%- comment -%}
  Newsletter popup. Shown after delay or exit intent; dismissed state in localStorage. Non-blocking.
{%- endcomment -%}
{%- if settings.newsletter_popup_enabled -%}
<div id="az-newsletter-popup"
     class="az-newsletter-popup"
     data-newsletter-popup
     data-delay="{{ settings.newsletter_popup_delay | default: 3 }}"
     data-exit-intent="{{ settings.newsletter_popup_exit_intent }}"
     data-cookie-days="{{ settings.newsletter_popup_cookie_days | default: 7 }}"
     hidden
     role="dialog"
     aria-labelledby="newsletter-popup-title"
     aria-modal="true">
  <div class="az-newsletter-popup__backdrop" data-newsletter-popup-close></div>
  <div class="az-newsletter-popup__panel">
    <button type="button" class="az-newsletter-popup__close" data-newsletter-popup-close aria-label="Close">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <path d="M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>
    <h2 class="az-newsletter-popup__title" id="newsletter-popup-title">
      {{ settings.newsletter_popup_headline | default: 'Join our world' }}
    </h2>
    <p class="az-newsletter-popup__text">
      {{ settings.newsletter_popup_text | default: 'Get 10% off your first order and exclusive drops. No spam.' }}
    </p>
    {% form 'customer', id: 'NewsletterPopupForm', class: 'az-newsletter-popup__form' %}
      <input type="hidden" name="contact[tags]" value="newsletter,popup">
      <label class="sr-only" for="NewsletterPopupEmail">Email</label>
      <input type="email"
             id="NewsletterPopupEmail"
             name="contact[email]"
             class="az-newsletter-popup__input"
             placeholder="{{ 'sections.footer.newsletter_placeholder' | t | default: 'Enter your email' }}"
             required
             autocomplete="email">
      <button type="submit" class="az-newsletter-popup__btn">
        {{ 'sections.footer.newsletter_button' | t | default: 'Subscribe' }}
      </button>
    {% endform %}
    <p class="az-newsletter-popup__fineprint">
      {{ settings.newsletter_popup_disclaimer | default: 'By subscribing you agree to our Privacy Policy. Unsubscribe anytime.' }}
    </p>
  </div>
</div>
{%- endif -%}
