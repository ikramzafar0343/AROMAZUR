{% comment %}
  Search results – products only (type=product).
  Search scope (Shopify default): product title, description, product_type, vendor, tags.
  To also search: Notes (metafields) / Inspired by (metafield) / Collection names –
  add those values to product description or tags, or use Search & Discovery app to index metafields.
{% endcomment %}
<section class="main-search az-page-transition">
  <div class="page-width">
    <h1 class="main-search__h1 az-fade-in az-fade-in--up az-fade-in--delay-1">Search</h1>

    <form action="{{ routes.search_url }}" method="get" role="search" class="az-fade-in az-fade-in--up az-fade-in--delay-1 main-search__form">
      <input type="hidden" name="type" value="product">
      <input type="search" name="q" value="{{ search.terms | escape }}" placeholder="Search products..." autocomplete="off">
      <button type="submit">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: inline-block; vertical-align: middle; margin-right: 6px;">
          <path d="M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Search
      </button>
    </form>

    {% if search.performed %}
      <h2 class="az-fade-in az-fade-in--up az-fade-in--delay-2">Results</h2>
      {% if search.results_count == 0 %}
        <p class="az-fade-in az-fade-in--up az-fade-in--delay-2 main-search__empty">
          No results found for "{{ search.terms | escape }}".
        </p>
      {% else %}
        <ul class="main-search__grid product-grid az-fade-in az-fade-in--up az-fade-in--delay-2" role="list">
          {% for product in search.results %}
            <li class="product-grid__item" style="animation-delay: {{ forloop.index0 | times: 0.03 }}s;">
              {% render 'product-card',
                product: product,
                show_quick_add: true,
                show_wishlist: true,
                delay_index: forloop.index0 | modulo: 5 | plus: 1 %}
            </li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Search",
  "tag": "section",
  "class": "section-main-search",
  "settings": []
}
{% endschema %}
